{% comment %}
  Langify Product Integration Snippet
  
  This snippet should be added to your Shopify theme to properly display
  translated product content from WooCommerce migration.
  
  Usage:
  1. Add this file to your theme's snippets folder as 'langify-product.liquid'
  2. Include it in your product template: {% render 'langify-product', product: product %}
  3. Or use individual parts as needed
{% endcomment %}

{% assign current_lang = request.locale.iso_code %}
{% assign default_lang = 'en' %}

{% comment %} Get translated title {% endcomment %}
{% assign translated_title = product.title %}
{% for metafield in product.metafields.langify %}
  {% if metafield.key == 'title_' | append: current_lang %}
    {% assign translated_title = metafield.value %}
    {% break %}
  {% endif %}
{% endfor %}

{% comment %} Get translated description {% endcomment %}
{% assign translated_description = product.description %}
{% for metafield in product.metafields.langify %}
  {% if metafield.key == 'body_html_' | append: current_lang %}
    {% assign translated_description = metafield.value %}
    {% break %}
  {% endif %}
{% endfor %}

{% comment %} Get translated excerpt {% endcomment %}
{% assign translated_excerpt = '' %}
{% for metafield in product.metafields.langify %}
  {% if metafield.key == 'excerpt_' | append: current_lang %}
    {% assign translated_excerpt = metafield.value %}
    {% break %}
  {% endif %}
{% endfor %}

{% comment %} Output translated content {% endcomment %}
<div class="langify-product-content" data-lang="{{ current_lang }}">
  
  {% comment %} Translated Title {% endcomment %}
  <h1 class="product-title">{{ translated_title }}</h1>
  
  {% comment %} Translated Excerpt (if available) {% endcomment %}
  {% if translated_excerpt != blank %}
    <div class="product-excerpt">
      {{ translated_excerpt }}
    </div>
  {% endif %}
  
  {% comment %} Translated Description {% endcomment %}
  <div class="product-description">
    {{ translated_description }}
  </div>
  
</div>

{% comment %} 
  Alternative: Direct metafield access for specific elements
  
  Title: {{ product.metafields.langify['title_' | append: current_lang] | default: product.title }}
  Description: {{ product.metafields.langify['body_html_' | append: current_lang] | default: product.description }}
  Excerpt: {{ product.metafields.langify['excerpt_' | append: current_lang] }}
{% endcomment %}

{% comment %} Debug information (remove in production) {% endcomment %}
{% if settings.langify_debug %}
  <div class="langify-debug" style="background: #f0f0f0; padding: 10px; margin: 10px 0; font-size: 12px;">
    <strong>Langify Debug:</strong><br>
    Current Language: {{ current_lang }}<br>
    Available Metafields:<br>
    {% for metafield in product.metafields.langify %}
      - {{ metafield.key }}: {{ metafield.value | truncate: 50 }}<br>
    {% endfor %}
  </div>
{% endif %}
